"use strict";(globalThis["webpackChunktugas_akhir_smart_greenhouse"]=globalThis["webpackChunktugas_akhir_smart_greenhouse"]||[]).push([[203],{9203:(a,t,e)=>{e.r(t),e.d(t,{default:()=>v});var l=e(9835),n=e(1957);const o=(0,l._)("span",{class:"text-h5 text-weight-light q-pa-md"},[(0,l._)("span",{class:"text-blue-grey-14"},"Ubah Data Set Tanaman")],-1),s={class:"q-pa-md"},i={class:"q-gutter-xs"},m=(0,l._)("div",{class:"q-mt-md"},null,-1),d=(0,l._)("div",{class:"q-mt-md"},null,-1),A={class:"col"},r=(0,l._)("div",{class:"q-mt-md"},null,-1);function u(a,t,e,u,p,c){const g=(0,l.up)("q-badge"),h=(0,l.up)("q-icon"),D=(0,l.up)("q-input"),_=(0,l.up)("q-select"),T=(0,l.up)("q-btn"),S=(0,l.up)("q-form"),M=(0,l.up)("q-card"),I=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(I,{padding:"",class:"items-center-justify-center bg-grey-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{flat:"",class:"bg-white q-pa-md"},{default:(0,l.w5)((()=>[o,(0,l._)("div",s,[(0,l.Wm)(S,{onSubmit:c.onSubmit,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)(g,{color:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Data Set Tanaman")])),_:1}),(0,l.Wm)(D,{label:"Media Tanam","lazy-rules":"",color:"primary",modelValue:p.MEDIA_TANAM,"onUpdate:modelValue":t[0]||(t[0]=a=>p.MEDIA_TANAM=a),rules:[a=>null!==a&&""!==a||"Media Tanam isi dengan benar"]},{append:(0,l.w5)((()=>[(0,l.Wm)(h,{name:"title"})])),_:1},8,["modelValue","rules"]),(0,l.Wm)(_,{filled:"",modelValue:p.IDTANAMAN,"onUpdate:modelValue":t[1]||(t[1]=a=>p.IDTANAMAN=a),options:p.tanamanOptions,"emit-value":"","map-options":"",color:"primary",label:"Tanaman"},{"no-option":(0,l.w5)((()=>[(0,l.Uk)(" Tidak ada opsi tersedia ")])),append:(0,l.w5)((()=>[(0,l.Wm)(h,{name:"grass"})])),_:1},8,["modelValue","options"]),m,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(p.ALAT,((a,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t},[(0,l.Wm)(_,{filled:"",modelValue:a.MAC_ADDRESS,"onUpdate:modelValue":t=>a.MAC_ADDRESS=t,options:p.alatOptions,"emit-value":"","map-options":"",color:"primary",label:"Sensor"},{"no-option":(0,l.w5)((()=>[(0,l.Uk)(" Tidak ada opsi tersedia ")])),append:(0,l.w5)((()=>[(0,l.Wm)(h,{name:"sensors"})])),_:2},1032,["modelValue","onUpdate:modelValue","options"]),d,(0,l._)("div",A,[(0,l.wy)((0,l.Wm)(T,{outline:"",class:"q-mr-sm",icon:"delete",color:"red",onClick:a=>c.removeForm(t)},null,8,["onClick"]),[[n.F8,t||!t&&p.ALAT.length>1]]),(0,l.wy)((0,l.Wm)(T,{outline:"",icon:"add",color:"primary",onClick:a=>c.addForm(t)},null,8,["onClick"]),[[n.F8,t==p.ALAT.length-1]]),r])])))),128))]),(0,l._)("div",null,[(0,l.Wm)(T,{unelevated:"",icon:"add",type:"submit",label:"Simpan Data",style:{height:"50px"},color:"primary"})])])),_:1},8,["onSubmit"])])])),_:1})])),_:1})}e(9665);var p=e(1569);const c={data(){return{MEDIA_TANAM:null,IDTANAMAN:null,ALAT:[{MAC_ADDRESS:null}],IDUSER:null,alatOptions:[],tanamanOptions:[]}},methods:{onSubmit(){const a={MEDIA_TANAM:this.MEDIA_TANAM,IDTANAMAN:this.IDTANAMAN,ALAT:this.ALAT.map((a=>({MAC_ADDRESS:a.MAC_ADDRESS}))),IDUSER:this.$q.localStorage.getItem("user").IDUSER};p.api.put(`settanam/edit/${this.$route.params.id}`,a).then((a=>{console.log(a),a.data.status?(this.$q.notify({color:"positive",message:a.data.message,actions:[{icon:"close",color:"white",round:!0,handler:()=>{}}]}),this.$router.push("/user/settanaman")):this.$q.notify({color:"negative",message:a.data.message,actions:[{icon:"close",color:"white",round:!0,handler:()=>{}}]})}))},addForm(a){this.ALAT.push({MAC_ADDRESS:null})},removeForm(a){this.ALAT.splice(a,1)},getAlatOption(){p.api.get("alat/getbyuser/"+this.$q.localStorage.getItem("user").IDUSER).then((a=>{this.alatOptions=a.data.data.map((a=>({label:a.NAMA_ALAT,value:a.MAC_ADDRESS})))}))},getTanamanOption(){p.api.get("tanaman/getbyuser/"+this.$q.localStorage.getItem("user").IDUSER).then((a=>{this.tanamanOptions=a.data.data.map((a=>({label:a.NAMA_TANAMAN,value:a.GUID})))}))},getSetTanamById(){p.api.get(`settanam/get/${this.$route.params.id}`).then((a=>{this.MEDIA_TANAM=a.data.data.MEDIA_TANAM,this.IDTANAMAN=a.data.data.IDTANAMAN,this.ALAT=a.data.data.ALAT.map((a=>({MAC_ADDRESS:a.MAC_ADDRESS}))),console.log(a)}))}},created(){this.getSetTanamById(),this.getAlatOption(),this.getTanamanOption()}};var g=e(1639),h=e(9885),D=e(4458),_=e(8326),T=e(990),S=e(3119),M=e(2857),I=e(757),N=e(8879),b=e(9420),q=e(9984),y=e.n(q);const E=(0,g.Z)(c,[["render",u]]),v=E;y()(c,"components",{QPage:h.Z,QCard:D.Z,QForm:_.Z,QBadge:T.Z,QInput:S.Z,QIcon:M.Z,QSelect:I.Z,QBtn:N.Z,QFile:b.Z})}}]);