"use strict";(globalThis["webpackChunktugas_akhir_smart_greenhouse"]=globalThis["webpackChunktugas_akhir_smart_greenhouse"]||[]).push([[455],{4455:(t,e,a)=>{a.r(e),a.d(e,{default:()=>T});var s=a(9835),i=a(6970);const r={class:"text-h6 text-center"};function h(t,e,a,h,o,n){const c=(0,s.up)("apexchart"),d=(0,s.up)("q-card-section"),l=(0,s.up)("q-card");return(0,s.wg)(),(0,s.j4)(l,{class:"q-pa-md q-ma-md card",style:{height:"550px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s._)("div",r,(0,i.zw)(o.series[0].name),1),(0,s.Wm)(c,{type:"line",options:o.chartOptions,series:o.series,height:o.chartOptions.chart.height},null,8,["options","series","height"])])),_:1})])),_:1})}a(9665);var o=a(7092),n=a.n(o),c=a(4209);const d={components:{apexchart:n()},data(){return{chartOptions:{chart:{id:"chart-alat",zoom:{enabled:!1},height:"250%"},xaxis:{categories:[0]},legend:{show:!0},dataLabels:{enabled:!0},colors:["#21ba45"]},series:[{name:"",data:[0]}],dataCounter:0,lastReceivedTime:null}},mounted(){this.initializeSocketIO()},methods:{updateChart(t,e){this.dataCounter<10?(this.series[0].data.push(t),this.chartOptions.xaxis.categories.push(e),this.dataCounter++):(this.series[0].data.shift(),this.series[0].data.push(t),this.chartOptions.xaxis.categories.shift(),this.chartOptions.xaxis.categories.push(e)),this.lastReceivedTime=e},initializeSocketIO(){const t=(0,c.io)("http://192.168.191.130:3001"),e=()=>{t.emit("send_message",{IDUSER:this.$q.localStorage.getItem("user").IDUSER})};t.on("dataUpdate",(t=>{this.realTimeData=t;const e=this.realTimeData.find((t=>{const e=t.ALAT_DATA;return e.some((t=>t.MAC_ADDRESS===this.$route.params.id))}));if(e){const t=e.ALAT_DATA;t.forEach((t=>{if(t.MAC_ADDRESS===this.$route.params.id){const e=t.NAMA_ALAT,a=t.DATA_SENSOR;this.series[0].name=e,a.forEach((t=>{const e=t.DATA_SENSOR,a=t.DATE_TIME;this.formatTime(a)!==this.lastReceivedTime&&this.updateChart(e,this.formatTime(a))}))}}))}})),this.interval=setInterval((()=>{e()}),1e3)},stopRealtimeUpdate(){clearInterval(this.interval)},formatTime(t){const e={hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},a=new Date(t).toLocaleTimeString(void 0,e);return a.startsWith("24:")?a.replace("24:","00:"):a}},beforeUnmount(){this.stopRealtimeUpdate()}};var l=a(1639),u=a(4458),m=a(3190),p=a(9984),g=a.n(p);const A=(0,l.Z)(d,[["render",h]]),T=A;g()(d,"components",{QCard:u.Z,QCardSection:m.Z})}}]);